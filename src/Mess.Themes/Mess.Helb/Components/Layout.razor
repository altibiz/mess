@using Microsoft.AspNetCore.Html
@using OrchardCore.ResourceManagement

@inherits LayoutShapeComponentBase

@inject IResourceManager resourceManager

<MudThemeProvider/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<HeadContent>
  <title>
    @{
      var siteName = Site?.SiteName;
      if (siteName != null) {
        @RenderTitleSegments(siteName, "before");
      }
    }
  </title>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  @HeadMeta

  @resourceManager.RenderMeta()
  @resourceManager.RenderHeadLink()
  @resourceManager.RenderHeadScript()
  @resourceManager.RenderStylesheet()
</HeadContent>

<header>
  @if (IsSectionDefined("Messages"))
  {
    @Messages
  }
</header>

<main>
  @Body
</main>

<footer>
  @Footer
</footer>

@resourceManager.RenderFootScript()

@code {
  private RenderFragment? HeadMeta { get; set; }
  private RenderFragment? Messages { get; set; }
  private RenderFragment? Footer { get; set; }

  protected override async Task OnInitializedAsync() {
    HeadMeta = await RenderSectionAsync("HeadMeta", false);
    Messages = await RenderSectionAsync("Messages", false);
    Footer = await RenderSectionAsync("Footer", false);
    Body ??= await RenderBodyAsync();
  }
}
